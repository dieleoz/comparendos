openapi: 3.0.3
info:
  title: Sistema de Comparendos - API Principal
  description: |
    ## üö® Sistema Integral de Gesti√≥n de Comparendos
    
    API completa para la gesti√≥n de comparendos de tr√°nsito con integraci√≥n de 
    b√°sculas, control de roles y auditor√≠a completa de operaciones.
    
    ### üèóÔ∏è Estado de Certificaci√≥n
    - **HU-COMP-000**: ‚úÖ CERTIFICADA Y COMPLETADA (Autenticaci√≥n y Roles)
      - üîê Sistema de autenticaci√≥n JWT implementado
      - üîë Roles y permisos configurados
      - üìù Documentaci√≥n actualizada
      - ‚úÖ Scripts de prueba funcionando
    - **HU-COMP-001**: ‚è≥ En Desarrollo (Gesti√≥n de Veh√≠culos)
    - **HU-COMP-002**: ‚è≥ Pendiente (Registro de Eventos de Pesaje)
    - **HU-COMP-003**: ‚è≥ Pendiente (Generaci√≥n de Comparendos)
    - **HU-COMP-004**: ‚è≥ Pendiente (Reportes y Auditor√≠a)
    
    ### üîê Autenticaci√≥n
    La API utiliza JWT (JSON Web Tokens) para la autenticaci√≥n. Todos los endpoints 
    requieren autenticaci√≥n excepto /auth/login y /ping.
    
    ### üéØ Entorno de Desarrollo
    - **URL Base**: http://localhost:6002/api
    - **Base de Datos**: PostgreSQL en puerto 5436
    - **Docker Network**: comparendos-network
    
  version: 1.0.0
  contact:
    name: Sistema de Comparendos
    email: admin@comparendos.com

servers:
  - url: http://localhost:6002/api
    description: Servidor de Desarrollo

security:
  - BearerAuth: []

securitySchemes:
  BearerAuth:
    type: http
    scheme: bearer
    bearerFormat: JWT
    description: Token JWT obtenido del endpoint /auth/login

schemas:
  LoginRequest:
    type: object
    required:
      - email
      - password
    properties:
      email:
        type: string
        format: email
        example: "operador.nn@comparendos.com"
      password:
        type: string
        example: "operador123"

  LoginResponse:
    type: object
    properties:
      success:
        type: boolean
      usuario:
        type: object
        properties:
          id:
            type: integer
          email:
            type: string
          rol:
            type: string
          nombre:
            type: string
          cargo:
            type: string
          estacion_asignada:
            type: integer
          estacion_nombre:
            type: string
      token:
        type: string
      expires_in:
        type: integer

tags:
  - name: auth
    description: Autenticaci√≥n y gesti√≥n de sesiones
  - name: roles
    description: Gesti√≥n de roles y permisos
  - name: usuarios
    description: Gesti√≥n de usuarios del sistema
  - name: sistema
    description: Endpoints del sistema y salud

paths:
  /ping:
    get:
      tags:
        - sistema
      summary: Verificar estado del servidor
      security: []
      responses:
        '200':
          description: Servidor operativo
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "pong"




